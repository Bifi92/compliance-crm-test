<%= simple_form_for(@lead) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <div class="input-group input-group-sm">

      <br><h4><strong> Informações do lead <strong></h4></br>
      
      <%= f.association :proprietario_user, label: "Proprietário" %> 

      <%= f.input :saudacao, collection: @lead.tipos_saudacao, label: "Saudação" , prompt: "Escolha a saudação" %>
      <%= f.input :nome %>
      <%= f.input :sobrenome %>
      <%= f.input :empresa %>
      <%= f.input :titulo, label: "Título" %>
      <%= f.input :status, collection: @lead.tipos_status, prompt: "Escolha o status" %>
      <%= f.input :fax %>
      <%= f.input :celular %>
      <%= f.input :telefone %>
      <%= f.input :recusar_telefonemas, collection: @lead.tipos_sim_nao, prompt: "Recusar telefonemas?" %>
      <%= f.input :email %>
      <%= f.input :recusar_emails, collection: @lead.tipos_sim_nao, prompt: "Recusar e-mails?" %>
      <%= f.input :classificacao, collection: @lead.tipos_classificacao, label: "Classificação", prompt: "Escolha a classificação" %>

      </br></br><h4><strong> Informações de endereço <strong></h4></br>

      <%= f.association :country, label: "País", label_method: :nome, prompt: "Escolha o pais"%>
      <%= f.association :estado, label_method: :nome, collection: [], prompt: "Escolha o estado" %>
      <%= f.association :cidade, label_method: :nome, collection: [], prompt: "Escolha a cidade" %>
      <%= f.input :rua %>
      <%= f.input :cep %>
      <%= f.input :site %>

      </br></br><h4><strong> Informações adicionais <strong></h4></br>

      <%= f.input :erp, collection: @lead.tipos_erp, label: "ERP", prompt: "Escolha o ERP" %>
      <%= f.input :solucao_fiscal, collection: @lead.tipos_solucao_fiscal, label: "Solução fiscal", prompt: "Escolha a solução fiscal" %>
      <%= f.input :origem, collection: @lead.tipos_origem, prompt: "Escolha a origem" %>
      <%= f.input :qtde_funcionarios, label: "Quantidade de funcionários" %>
      <%= f.input :qtde_cnpj, label: "Quantidade de CNPJ" %>
      <%= f.input :setor, collection: @lead.tipos_setor, prompt: "Escolha o setor" %>
      <%= f.input :receita_anual, as: :decimal %>
      <%= f.input :tipo_interesse, label: "Solução e/ou serviço de interesse" %>
      <%= f.input :produtos_interesse, label: "Produtos de interesse" %>

      </br></br><h4><strong> Informações de descrição <strong></h4></br>

      <%= f.input :descricao, label: "Descrição" %>
    </div> <!-- input-group input-group-sm -->
  </div> <!-- form-inputs -->

  <div class="form-actions">
    <%= f.button :submit, :class => 'btn-sm' %>
  </div>
<% end %>

<script type="text/javascript">
  $(document).ready(function() {
   $("#lead_country_id").change(function() {
      getEstadosṔorPais("id="+$("#lead_country_id").val());
    });
  });

  function getEstadosṔorPais(id) {
    $.getJSON("/estados_por_pais", id, function(j) {
      var options = '<option value="">Escolha o estado</option>';
      $.each(j.est, function(i, item) {
        options += '<option value="' + item.id + '">' + item.n + '</option>';
      });
      $("#lead_estado_id").html(options);
    });
  }
</script>

<script type="text/javascript">
  $(document).ready(function() {
   $("#lead_estado_id").change(function() {
      getCidadesṔorEstado("id="+$("#lead_estado_id").val());
    });
  });

  function getCidadesṔorEstado(id) {
    $.getJSON("/cidades_por_estado", id, function(j) {
      var options = '<option value="">Escolha a cidade</option>';
      $.each(j.cid, function(i, item) {
        options += '<option value="' + item.id + '">' + item.n + '</option>';
      });
      $("#lead_cidade_id").html(options);
    });
  }
</script>

<script type="text/javascript">
  $(document).ready(function() {
   $("#lead_country_id").change(function() {
      getCidadesNil("id="+$("#lead_country_id").val());
    });
  });

  function getCidadesNil(id) {
    $.getJSON("/cidades_nil", id, function(j) {
      var options = '<option value="">Escolha a cidade</option>';
      $.each(j.cid, function(i, item) {
        options += '<option value="' + item.id + '">' + item.n + '</option>';
      });
      $("#lead_cidade_id").html(options);
    });
  }
</script>